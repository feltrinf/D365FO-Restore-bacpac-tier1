{"tasks":[{"environment":{},"displayName":"ImportRestore-bacpac","alwaysRun":false,"continueOnError":false,"condition":"eq(variables['isSuccess'],True)","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$newDBName = ('AxDB_{0}' -f \"$(name)\" )\n try \n{\n    if(\"$(Do_Restore)\" -eq \"$True\")\n    {\n        Import-D365Bacpac -ImportModeTier1 -BacpacFile \"$(filenamepath)\" -NewDatabaseName $newDBName\n    \n        Switch-D365ActiveDatabase -NewDatabaseName \"$newDBName\"\n    }\n\n    if(\"$(Do_DeleteOrig)\" -eq \"$true\")\n    {\n        Remove-D365Database -DatabaseName \"AXDB_original\"\n    }\n\n    Write-Host \"All database operations completed successfully\"\n    $isSuccess = $True\n}\ncatch\n{\n    Write-Host \"Failed to trigger request, Exception: $_\" -ForegroundColor Red\n    $isSuccess = $False\n}\n\nWrite-Host \"##vso[task.setvariable variable=isSuccess]$isSuccess\"","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":10,"createdBy":{"displayName":"Francesco Feltrin","id":"6671c05e-8b0e-6a74-9e5d-a2c2dc2afa6e","uniqueName":"francesco.feltrin@cegeka.it"},"createdOn":"2020-05-09T15:21:04.397Z","modifiedBy":{"displayName":"Francesco Feltrin","id":"6671c05e-8b0e-6a74-9e5d-a2c2dc2afa6e","uniqueName":"francesco.feltrin@cegeka.it"},"modifiedOn":"2020-05-10T12:37:16.117Z","comment":"","id":"b4c88683-4b9b-4c16-97cc-1985ca41dd20","name":"cgkImportRestore-bacpac","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M168_20200506.1/_content/icon-meta-task.png","friendlyName":"cgkImportRestore-bacpac","description":"Import and restore bacpac. Eventually delete AxDB_original","category":"Utility","definitionType":"metaTask","author":"Francesco Feltrin","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"Do_DeleteOrig","label":"Do_DeleteOrig","defaultValue":"$(Do_DeleteOrig)","required":true,"type":"string","helpMarkDown":"delete AxDB_Original","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Do_Restore","label":"Do_Restore","defaultValue":"$(Do_Restore)","required":true,"type":"string","helpMarkDown":"Import and switch database","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"filenamepath","label":"filenamepath","defaultValue":"$(filenamepath)","required":true,"type":"string","helpMarkDown":"bacpac full filename path","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"name","label":"name","defaultValue":"$(name)","required":true,"type":"string","helpMarkDown":"lcs bacpac name","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: cgkImportRestore-bacpac $(Do_DeleteOrig)","preJobExecution":{},"execution":{},"postJobExecution":{}}